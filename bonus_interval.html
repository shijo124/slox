<!DOCTYPE html>
<html lang="ja" class="h-100">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="theme-color" content="#7952b3">
        <title>slox</title>
        <link rel="apple-touch-icon" href="https://getbootstrap.jp/docs/5.0/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
        <link rel="icon" href="https://getbootstrap.jp/docs/5.0/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
        <link rel="icon" href="https://getbootstrap.jp/docs/5.0/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
        <link rel="manifest" href="https://getbootstrap.jp/docs/5.0/assets/img/favicons/manifest.json">
        <link rel="mask-icon" href="https://getbootstrap.jp/docs/5.0/assets/img/favicons/safari-pinned-tab.svg" color="#7952b3">
        <link rel="icon" href="https://getbootstrap.jp/docs/5.0/assets/img/favicons/favicon.ico">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <!-- bootstrap cdn -->
        <link rel="stylesheet" onload="window.hljscss = 1;" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous" />
        <script>window.hljscss || document.write('<link rel="stylesheet" href="./assets/css/bootstrap.min.css" \/>');</script>
    </head>

    <body class="d-flex h-100 text-center text-white bg-dark">
        <div class="container d-flex w-100 h-100 mx-auto flex-column">

            <header class="mb-auto">
                <div>
                    <h1 class="float-start mb-0 h3">slox</h1>
                    <nav class="nav nav-masthead justify-content-center float-md-end">
                        <!-- <a class="nav-link active" aria-current="page" href="https://getbootstrap.jp/docs/5.0/examples/cover/#">ホーム</a>
                        <a class="nav-link" href="https://getbootstrap.jp/docs/5.0/examples/cover/#">特徴</a>
                        <a class="nav-link" href="https://getbootstrap.jp/docs/5.0/examples/cover/#">連絡</a> -->
                    </nav>
                </div>
            </header>

            <main class="px-3">
                <div style="width:100%;height:auto;overflow:auto;">
                    <canvas id="js_bonus_chart" class="" width="3000" height="400"></canvas>
                </div>
            </main>

            <footer class="mt-auto text-white-50">
                <div class="row">
                    <div class="col p-1">
                        <a href="./main.html" class="btn btn-secondary p-1 w-100">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="25" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6zm5-.793V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
                                <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
                            </svg>
                            ホーム
                        </a>
                    </div>
                    <div class="col p-1">
                        <a href="./guessing.html" class="btn btn-secondary p-1 w-100">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="25" fill="currentColor" class="bi bi-graph-up" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M0 0h1v15h15v1H0V0zm10 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4.9l-3.613 4.417a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61L13.445 4H10.5a.5.5 0 0 1-.5-.5z"/>
                            </svg>
                            設定
                        </a>
                    </div>
                    <div class="col p-1">
                        <a href="./bonus_interval.html" class="btn btn-secondary p-1 w-100">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="25" fill="currentColor" class="bi bi-reception-4" viewBox="0 0 16 16">
                                <path d="M0 11.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2zm4-3a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-5zm4-3a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-8zm4-3a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-11z"/>
                            </svg>
                            ボナ間
                        </a>
                    </div>
                    <div class="col p-1">
                        <a href="./bonus_edit.html" class="btn btn-secondary p-1 w-100">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="25" fill="currentColor" class="bi bi-eraser-fill" viewBox="0 0 16 16">
                                <path d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z"/>
                            </svg>
                            修正
                        </a>
                    </div>
                    <div class="col p-1 js_debug">
                        <a href="./share.html" class="btn btn-secondary p-1 w-100">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="25" fill="currentColor" class="bi bi-share-fill" viewBox="0 0 16 16">
                                <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                            </svg>
                            共有
                        </a>
                    </div>
                </div>
            </footer>

            <!-- Modal -->
            <div class="modal fade" id="bonus_modal" tabindex="-1" data-bs-backdrop="static" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content bg-dark">
                        <div class="modal-body">
                            <form class=".js_bonus_form">
                                <div class="input-group mb-3">
                                    <span class="input-group-text w-50">当選ゲーム数(必須)</span>
                                    <input type="tel" class="form-control text-end" name="all_game_cnt" placeholder="" oninput="if(value.length>4)value=value.slice(0,4)" required autofocus>
                                </div>
                                <div class="input-group mb-3">
                                    <span class="input-group-text bg-success text-white w-50">累計ブドウ(任意)</span>
                                    <input type="tel" class="form-control text-end" name="all_budo_cnt" placeholder="" oninput="if(value.length>5)value=value.slice(0,5)">
                                </div>
                                <div class="input-group mb-3">
                                    <span class="input-group-text bg-danger text-white w-50">累計チェリー(任意)</span>
                                    <input type="tel" class="form-control text-end" name="all_cherry_cnt" placeholder="" oninput="if(value.length>5)value=value.slice(0,5)">
                                </div>
                            </form>
                            <div class="row">
                                <div class="col w-100">
                                    <button type="button" class="btn btn-outline-danger w-100 js_bonus_btn" data-bonus-kind="tan_big">単独BIG</button>
                                </div>
                                <div class="col w-100">
                                    <button type="button" class="btn btn-outline-success w-100 js_bonus_btn" data-bonus-kind="tan_reg">単独REG</button>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col w-100">
                                    <button type="button" class="btn btn-outline-warning w-100 js_bonus_btn" data-bonus-kind="che_big">チェリー重複BIG</button>
                                </div>
                                <div class="col w-100">
                                    <button type="button" class="btn btn-outline-info w-100 js_bonus_btn" data-bonus-kind="che_reg">チェリー重複REG</button>
                                </div>
                            </div>
                            <div class="mt-3 text-end">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- js -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
        <!-- iquery cdn -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" referrerpolicy="no-referrer"></script>
        <script>window.jQuery || document.write('<script src="./assets/js/jquery.min.js"><\/script>');</script>
        <!-- iquery cookie cdn -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" integrity="sha512-3j3VU6WC5rPQB4Ld1jnLV7Kd5xr+cq9avvhwqzbH/taCRNURoeEpoPBK9pDyeukwSxwRPJ8fDgvYXd6SkaZ2TA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!-- chart.js cdn -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.4.1/chart.min.js" integrity="sha512-5vwN8yor2fFT9pgPS9p9R7AszYaNn0LkQElTXIsZFCL7ucT8zDCAqlQXDdaqgA1mZP47hdvztBMsIoFxq/FyyQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="./assets/js/com.js"></script>
        <script src="./assets/js/main.js"></script>
        <script>

            //---
            var bonus_modal = new bootstrap.Modal(document.getElementById('bonus_modal'), {
                keyboard: false
            });

            //---
            var ctx = document.getElementById("js_bonus_chart").getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [
                        {
                            data: [],
                            backgroundColor: [],
                        }
                    ]
                },
                options: {
                    responsive:false,
                    legend: {
                        display:false
                    },
                    // title: {
                    //     display:true,
                    //     text: 'ボーナス表'
                    // },
                    scales: {
                        y:{
                            ticks: {
                                suggestedMax: 1000,
                                suggestedMin: 0,
                                stepSize: 100,
                                callback: function(value, index, values){
                                    return  value +  ''
                                }
                            }
                        }
                    },
                }
            });

            $(window).on('load', function() {
                bonus_rate_update();
                update_bonus_chart(myChart);
            });

            $(".js_bonus_btn").on("click", function(){

                let all_cnt = parseInt($('input[name="all_game_cnt"]').val());
                let budo_cnt = parseInt($('input[name="all_budo_cnt"]').val());
                let cherry_cnt = parseInt($('input[name="all_cherry_cnt"]').val());
                let bonus_kind = $(this).attr("data-bonus-kind");

                let ret_bonus_save = bonus_save(all_cnt,budo_cnt,cherry_cnt,bonus_kind);

                if(ret_bonus_save){
                    $('input[name="all_game_cnt"]').val("");
                    $('input[name="all_budo_cnt"]').val("");
                    $('input[name="all_cherry_cnt"]').val("");
                    bonus_rate_update();
                    update_bonus_chart(myChart);
                    bonus_modal.hide();
                }

            });

            $('.js_debug').on('click', function(){
                cookie_del();
            });

        </script>

    </body>
</html>